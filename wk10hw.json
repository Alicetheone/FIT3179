{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Two vertically concatenated charts that show a histogram of precipitation in Seattle and the relationship between min and max temperature.",
  "data": {"url": "https://raw.githubusercontent.com/Alicetheone/FIT3179/main/ne_110m.json"},
  "transform": [{"filter": "datum.NOC === 'AUS'"}],
  "vconcat": [
    {
      "title": "Host Countries of Winter and Summer Olympics (1960 to 2020)",
  "width": 700,
  "height": 400,
  "projection": {"type": "equalEarth"},
  "data": {
    "url": "https://raw.githubusercontent.com/Alicetheone/FIT3179/main/ne_110m.json",
    "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
  },
  "transform": [
    {
      "lookup": "properties.NAME",
      "from": {
        "data": {
          "url": "https://raw.githubusercontent.com/Alicetheone/FIT3179/main/host%20cities.csv"
        },
        "key": "Host Countries",
        "fields": ["Count", "Sum_Revenue"]
      }
    },
    {"calculate": "datum.Count + 0.1", "as": "Count of times hosting Olympic"}
  ],
  "mark": {"type": "geoshape","stroke":"lightgrey"},
  "encoding": {
    "color": {
      "field": "Count of times hosting Olympic",
      "type": "quantitative"
    },
    "tooltip": [
      {"field": "properties.NAME", "type": "nominal", "title": "Country"},
      {"field": "Count", "type": "quantitative"},
      {
        "field": "Sum_Revenue",
        "type": "quantitative",
        "title": "Total Revenue (in millions USD)"
      }
    ]
  }
    },
    {
      "data": {
      "url": "https://raw.githubusercontent.com/Alicetheone/FIT3179/main/FIT3179_A2.csv"},
      "width": 700,
      "height": 60,
      "mark": "line",
      "title": "Use this line chart to filter out the data based on time",
      "params": [
        {
          "name": "time_brush",
          "select": {"type": "interval", "encodings": ["x"]}
        }
      ],
      "encoding": {
        "x": {
          "field": "Year",
          "timeUnit": "year",
          "axis": {"title": "", "format": "%Y"}
        },
        "y": {
          "aggregate": "count",
          "axis": {"tickCount": 3, "grid": false},
          "title": "Count"
        }
      }
    },
    {
      "data": {
      "url": "https://raw.githubusercontent.com/Alicetheone/FIT3179/main/FIT3179_A2.csv"},
      "width": 700,
      "height": 400,
      "selection":{
        "Medal_choice" :{
          "type":"multi",
          "fields":["Medal"],
          "bind":"legend"
        }
      },
      "mark": "area",
      "encoding": {
        "x": {
          "field": "Year",
          "timeUnit": "year",
          "scale": {"domain": {"param": "time_brush"}},
          "axis": {"title": "", "tickCount": 10, "grid": false}
        },
        "y": {"aggregate": "count", "field": "Medal", "type": "nominal"},
        "color": {
          "field": "Medal",
          "type":"nominal",
          "scale": {
            "domain":[
              "Gold",
              "Silver",
              "Bronze"
            ],
            "range": ["#fdbe85", 
            "#fd8d3c", 
            "#e6550d"]
          }
        },
        "opacity":{
          "condition":{"selection":"Medal_choice","value":0.6},
          "value":0.2},
        "legend": {"format":".1s"}
      }
    }
  ]
}
